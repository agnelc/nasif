(function(c){var f={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},d=f[Modernizr.prefixed("transition")],b={transitions:Modernizr.csstransitions};function e(h,g){for(var i in g){if(g.hasOwnProperty(i)){h[i]=g[i]}}return h}function a(h,g){this.el=h;this.options=e({},this.options);e(this.options,g);this._init()}a.prototype.options={onSubmit:function(){return false}};a.prototype._init=function(){this.current=0;this.questions=[].slice.call(this.el.querySelectorAll("ol.questions > li"));this.questionsCount=this.questions.length;classie.addClass(this.questions[0],"current");this.ctrlNext=this.el.querySelector("button.next");this.progress=this.el.querySelector("div.progress");this.questionStatus=this.el.querySelector("span.number");this.currentNum=this.questionStatus.querySelector("span.number-current");this.currentNum.innerHTML=Number(this.current+1);this.totalQuestionNum=this.questionStatus.querySelector("span.number-total");this.totalQuestionNum.innerHTML=this.questionsCount;this.error=this.el.querySelector("span.error-message");this._initEvents()};a.prototype._initEvents=function(){var h=this,g=this.questions[this.current].querySelector("input"),i=function(){g.removeEventListener("focus",i);classie.addClass(h.ctrlNext,"show")};g.addEventListener("focus",i);this.ctrlNext.addEventListener("click",function(j){j.preventDefault();h._nextQuestion()});document.addEventListener("keydown",function(k){var j=k.keyCode||k.which;if(j===13){k.preventDefault();h._nextQuestion()}});this.el.addEventListener("keydown",function(k){var j=k.keyCode||k.which;if(j===9){k.preventDefault()}})};a.prototype._nextQuestion=function(){if(!this._validade()){return false}if(this.current===this.questionsCount-1){this.isFilled=true}this._clearError();var j=this.questions[this.current];++this.current;this._progress();if(!this.isFilled){this._updateQuestionNumber();classie.addClass(this.el,"show-next");var g=this.questions[this.current];classie.removeClass(j,"current");classie.addClass(g,"current")}var h=this,i=function(k){if(b.transitions){this.removeEventListener(d,i)}if(h.isFilled){h._submit()}else{classie.removeClass(h.el,"show-next");h.currentNum.innerHTML=h.nextQuestionNum.innerHTML;h.questionStatus.removeChild(h.nextQuestionNum);g.querySelector("input").focus()}};if(b.transitions){this.progress.addEventListener(d,i)}else{i()}};a.prototype._progress=function(){this.progress.style.width=this.current*(100/this.questionsCount)+"%"};a.prototype._updateQuestionNumber=function(){this.nextQuestionNum=document.createElement("span");this.nextQuestionNum.className="number-next";this.nextQuestionNum.innerHTML=Number(this.current+1);this.questionStatus.appendChild(this.nextQuestionNum)};a.prototype._submit=function(){this.options.onSubmit(this.el)};a.prototype._validade=function(){var g=this.questions[this.current].querySelector("input").value;if(g===""){this._showError("EMPTYSTR");return false}return true};a.prototype._showError=function(h){var g="";switch(h){case"EMPTYSTR":g="Please fill the field before continuing";break;case"INVALIDEMAIL":g="Please fill a valid email address";break}this.error.innerHTML=g;classie.addClass(this.error,"show")};a.prototype._clearError=function(){classie.removeClass(this.error,"show")};c.stepsForm=a})(window);